import{r as u,j as o,B as h,aB as l}from"./index-7JCrVMyd.js";import{T as C}from"./ToolImageInput-BfRmeQE8.js";import{T as w}from"./ToolFileResult-Div6pbTm.js";import{T}from"./ToolContent-DrkA_-Xz.js";import{T as m}from"./TextFieldWithDesc-D98LnRRi.js";import{S as g}from"./SimpleRadio-BbIGpl0h.js";import"./BaseFileInput-CTIURbfW.js";import"./ContentPaste-CJSvfBhK.js";import"./InputFooter-Cia2zmGJ.js";import"./grey-pattern-DMflWW5d.js";import"./lodash-jIFHsyXN.js";import"./ResultFooter-DAeFmDVK.js";import"./TextField-DeGHHacn.js";import"./Radio-Clz2uSlr.js";import"./SwitchBase-CZaFkbti.js";async function S(t,i){return new Promise((n,p)=>{const c=new FileReader;c.onload=d=>{var a;const e=new Image;e.onload=()=>{const r=document.createElement("canvas"),s=r.getContext("2d");if(!s){p(new Error("Canvas context not supported"));return}r.width=e.width,r.height=e.height,i.mode==="solid"?b(s,e,i):x(s,e,i),r.toBlob(y=>{if(y){const f=new File([y],t.name,{type:t.type});n(f)}else p(new Error("Failed to generate image blob"))},t.type)},e.onerror=()=>p(new Error("Failed to load image")),e.src=(a=d.target)==null?void 0:a.result},c.onerror=()=>p(new Error("Failed to read file")),c.readAsDataURL(t)})}function b(t,i,n){t.clearRect(0,0,t.canvas.width,t.canvas.height),t.globalAlpha=n.opacity,t.drawImage(i,0,0)}function x(t,i,n){const{areaLeft:p,areaTop:c,areaWidth:d,areaHeight:e}=n;t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(i,0,0);const a=n.gradientType==="linear"?j(t,n):O(t,n);t.fillStyle=a,t.fillRect(p,c,d,e)}function j(t,i){const{areaLeft:n,areaTop:p,areaWidth:c,areaHeight:d}=i,e=t.createLinearGradient(n,p,n+c,p);return e.addColorStop(0,`rgba(255,255,255,${i.opacity})`),e.addColorStop(1,"rgba(255,255,255,0)"),e}function O(t,i){const{areaLeft:n,areaTop:p,areaWidth:c,areaHeight:d}=i,e=n+c/2,a=p+d/2,r=Math.min(c,d)/2,s=t.createRadialGradient(e,a,0,e,a,r);return i.gradientDirection==="inside-out"?(s.addColorStop(0,`rgba(255,255,255,${i.opacity})`),s.addColorStop(1,"rgba(255,255,255,0)")):(s.addColorStop(0,"rgba(255,255,255,0)"),s.addColorStop(1,`rgba(255,255,255,${i.opacity})`)),s}const R={opacity:.5,mode:"solid",gradientType:"linear",gradientDirection:"left-to-right",areaLeft:0,areaTop:0,areaWidth:100,areaHeight:100};function M({title:t}){const[i,n]=u.useState(null),[p,c]=u.useState(null),d=(e,a)=>{a&&S(a,e).then(c)};return o.jsx(T,{title:t,input:i,inputComponent:o.jsx(C,{value:i,onChange:n,accept:["image/*"],title:"Input image"}),resultComponent:o.jsx(w,{title:"Changed image",value:p}),initialValues:R,getGroups:({values:e,updateField:a})=>[{title:"Opacity Settings",component:o.jsxs(h,{children:[o.jsx(m,{description:"Set opacity between 0 (transparent) and 1 (opaque)",value:e.opacity,onOwnChange:r=>l(r,"opacity",a),type:"number",inputProps:{step:.1,min:0,max:1}}),o.jsx(g,{onClick:()=>a("mode","solid"),checked:e.mode==="solid",description:"Set the same opacity level for all pixels",title:"Apply Solid Opacity"}),o.jsx(g,{onClick:()=>a("mode","gradient"),checked:e.mode==="gradient",description:"Change opacity in a gradient",title:"Apply Gradient Opacity"})]})},{title:"Gradient Options",component:o.jsxs(h,{children:[o.jsx(g,{onClick:()=>a("gradientType","linear"),checked:e.gradientType==="linear",description:"Linear opacity direction",title:"Linear Gradient"}),o.jsx(g,{onClick:()=>a("gradientType","radial"),checked:e.gradientType==="radial",description:"Radial opacity direction",title:"Radial Gradient"})]})},{title:"Opacity Area",component:o.jsxs(h,{children:[o.jsx(m,{description:"Left position",value:e.areaLeft,onOwnChange:r=>l(r,"areaLeft",a),type:"number"}),o.jsx(m,{description:"Top position",value:e.areaTop,onOwnChange:r=>l(r,"areaTop",a),type:"number"}),o.jsx(m,{description:"Width",value:e.areaWidth,onOwnChange:r=>l(r,"areaWidth",a),type:"number"}),o.jsx(m,{description:"Height",value:e.areaHeight,onOwnChange:r=>l(r,"areaHeight",a),type:"number"})]})}],compute:d})}export{M as default};
