import{a as A,r as m,j as i,B as g}from"./index-7JCrVMyd.js";import{T as v}from"./ToolContent-DrkA_-Xz.js";import{f as h,F as j}from"./index-on_GoYzL.js";import{T}from"./ToolVideoInput-D0Q1Ed0Y.js";import{T as f}from"./ToolFileResult-Div6pbTm.js";import{S as y}from"./SelectWithDesc-C9uboz12.js";import"./TextField-DeGHHacn.js";import"./objectWithoutProperties-rK072Nhf.js";import"./BaseFileInput-CTIURbfW.js";import"./ContentPaste-CJSvfBhK.js";import"./InputFooter-Cia2zmGJ.js";import"./grey-pattern-DMflWW5d.js";import"./lodash-jIFHsyXN.js";import"./ResultFooter-DAeFmDVK.js";const s=new j;async function b(r,l){s.loaded||await s.load({wasmURL:"https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.9/dist/esm/ffmpeg-core.wasm"});const t="input.mp4";await s.writeFile(t,await h(r));const o=l.outputFormat,e=`output.${o}`,a=["-i",t,"-vn"];o==="mp3"?a.push("-ar","44100","-ac","2","-b:a","192k","-f","mp3",e):o==="wav"?a.push("-acodec","pcm_s16le","-ar","44100","-ac","2","-f","wav",e):a.push("-acodec","copy",e),await s.exec(a);const c=await s.readFile(e);return new File([new Blob([c],{type:`audio/${o}`})],`${r.name.replace(/\.[^/.]+$/,"")}_audio.${o}`,{type:`audio/${o}`})}const C={outputFormat:"aac"};function G({title:r,longDescription:l}){const{t}=A("audio"),[o,e]=m.useState(null),[a,c]=m.useState(null),[x,d]=m.useState(!1),F=({values:p,updateField:n})=>[{title:t("extractAudio.outputFormat"),component:i.jsx(g,{children:i.jsx(y,{selected:p.outputFormat,onChange:u=>{n("outputFormat",u.toString())},options:[{label:"AAC",value:"aac"},{label:"MP3",value:"mp3"},{label:"WAV",value:"wav"}],description:t("extractAudio.outputFormatDescription")})})}],w=async(p,n)=>{if(n)try{d(!0);const u=await b(n,p);c(u)}catch(u){console.error(u)}finally{d(!1)}};return i.jsx(v,{title:r,input:o,inputComponent:i.jsx(T,{value:o,onChange:e,title:t("extractAudio.inputTitle")}),resultComponent:x?i.jsx(f,{title:t("extractAudio.extractingAudio"),value:null,loading:!0}):i.jsx(f,{title:t("extractAudio.resultTitle"),value:a}),initialValues:C,getGroups:F,compute:w,toolInfo:{title:t("extractAudio.toolInfo.title",{title:r}),description:l},setInput:e})}export{G as default};
