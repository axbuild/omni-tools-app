import{r as m,j as a,G as p}from"./index-7JCrVMyd.js";import{T as x}from"./ToolContent-DrkA_-Xz.js";import{T as d}from"./ToolCodeInput-BrtIQW2K.js";import{T as S}from"./ToolTextResult-BPpE0Rrg.js";import"./TextField-DeGHHacn.js";import"./ContentPaste-CJSvfBhK.js";import"./InputFooter-Cia2zmGJ.js";import"./ResultFooter-DAeFmDVK.js";const v=r=>r.replace(/,\s*([}\]])/g,"$1").replace(/,\s*\n\s*([}\]])/g,`
$1`),h=r=>{if(!r.trim())return{valid:!0,data:{}};try{const n=v(r);return{valid:!0,data:JSON.parse(n)}}catch(n){const o=n instanceof SyntaxError?n.message:"Invalid JSON format",e=o.match(/at line (\d+) column (\d+)/);if(e){const[,s,t]=e;return{valid:!1,error:`${o}
Location: Line ${s}, Column ${t}`}}return{valid:!1,error:o}}},J=(r,n,o)=>{if(!r.trim()&&!n.trim())return"";const e=h(r),s=h(n);if(!e.valid||!s.valid){const t=[];throw e.valid||t.push(`First JSON: ${e.error}`),s.valid||t.push(`Second JSON: ${s.error}`),new Error(t.join(`

`))}{const t=g(e.data,s.data);return t.length===0?"No differences found":t.join(`
`)}},g=(r,n,o=[])=>{const e=[],s=t=>t.length?t.join("."):"root";for(const t in r){const i=[...o,t];if(!(t in n)){e.push(`${s(i)}: Missing in second JSON`);continue}const c=r[t],u=n[t];typeof c=="object"&&c!==null&&typeof u=="object"&&u!==null?e.push(...g(c,u,i)):c!==u&&e.push(`${s(i)}: Mismatch: ${c} != ${u}`)}for(const t in n)if(!(t in r)){const i=[...o,t];e.push(`${s(i)}: Missing in first JSON`)}return e},$={};function M({title:r}){const[n,o]=m.useState(""),[e,s]=m.useState(""),[t,i]=m.useState("");m.useEffect(()=>{(()=>{try{if(n.trim()||e.trim()){const f=J(n||"{}",e||"{}","text");i(f)}else i("")}catch(f){i(`Error: ${f instanceof Error?f.message:"Invalid JSON format"}`)}})()},[n,e]);const c=l=>{o(l??"")},u=l=>{s(l)};return a.jsx(x,{title:r,input:n,setInput:o,initialValues:$,getGroups:null,compute:()=>{},inputComponent:a.jsxs(p,{container:!0,spacing:2,children:[a.jsx(p,{item:!0,xs:12,md:6,lg:4,children:a.jsx(d,{title:"First JSON",value:n,onChange:c,language:"json"})}),a.jsx(p,{item:!0,xs:12,md:6,lg:4,children:a.jsx(d,{title:"Second JSON",language:"json",value:e,onChange:u})}),a.jsx(p,{item:!0,xs:12,md:12,lg:4,children:a.jsx(S,{title:"Differences",value:t,extension:"txt"})})]})})}export{M as default};
