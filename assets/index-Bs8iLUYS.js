import{a as w,r as u,j as o,B as g}from"./index-7JCrVMyd.js";import{c as F,a as b}from"./index.esm-Cob4-rpC.js";import{T as d}from"./ToolFileResult-Div6pbTm.js";import{T as j}from"./ToolContent-DrkA_-Xz.js";import{l as T}from"./lodash-jIFHsyXN.js";import{T as C}from"./ToolVideoInput-D0Q1Ed0Y.js";import{f as y,F as z}from"./index-on_GoYzL.js";import{S}from"./SimpleRadio-BbIGpl0h.js";import"./ContentPaste-CJSvfBhK.js";import"./grey-pattern-DMflWW5d.js";import"./ResultFooter-DAeFmDVK.js";import"./TextField-DeGHHacn.js";import"./objectWithoutProperties-rK072Nhf.js";import"./BaseFileInput-CTIURbfW.js";import"./InputFooter-Cia2zmGJ.js";import"./Radio-Clz2uSlr.js";import"./SwitchBase-CZaFkbti.js";const r=new z;async function V(n,e){r.loaded||await r.load({wasmURL:"https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.9/dist/esm/ffmpeg-core.wasm"});const i="input.mp4",a="output.mp4";await r.writeFile(i,await y(n));const s={horizontal:"hflip",vertical:"vflip"}[e],l=["-i",i];s&&l.push("-vf",s),l.push("-c:v","libx264","-preset","ultrafast",a),await r.exec(l);const p=await r.readFile(a);return new File([new Blob([p],{type:"video/mp4"})],`${n.name.replace(/\.[^/.]+$/,"")}_flipped.mp4`,{type:"video/mp4"})}const R={orientation:"horizontal"},$=F({orientation:b().oneOf(["horizontal","vertical"],"Orientation must be horizontal or vertical").required("Orientation is required")}),E=[{value:"horizontal",label:"Horizontal (Mirror)"},{value:"vertical",label:"Vertical (Upside Down)"}];function Q({title:n}){const{t:e}=w("video"),[i,a]=u.useState(null),[f,s]=u.useState(null),[l,p]=u.useState(!1),v=async(c,m)=>{if(m){p(!0);try{const t=await V(m,c.orientation);s(t)}catch(t){console.error("Error flipping video:",t)}finally{p(!1)}}},h=u.useCallback(T.debounce(v,1e3),[]),x=({values:c,updateField:m})=>[{title:e("flip.orientation"),component:o.jsx(g,{children:E.map(t=>o.jsx(S,{title:e(`flip.${t.value}Label`),checked:c.orientation===t.value,onClick:()=>{m("orientation",t.value)}},t.value))})}];return o.jsx(j,{title:n,input:i,inputComponent:o.jsx(C,{value:i,onChange:a,title:e("flip.inputTitle")}),resultComponent:l?o.jsx(d,{title:e("flip.flippingVideo"),value:null,loading:!0,extension:""}):o.jsx(d,{title:e("flip.resultTitle"),value:f,extension:"mp4"}),initialValues:R,getGroups:x,compute:h,setInput:a,validationSchema:$})}export{Q as default,R as initialValues,$ as validationSchema};
