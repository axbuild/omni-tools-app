import{a as R,r as V,j as I}from"./index-7JCrVMyd.js";import{T as X}from"./ToolContent-DrkA_-Xz.js";import{T as v}from"./ToolTextInput-pMJPolT7.js";import{T as G}from"./ToolTextResult-BPpE0Rrg.js";import{i as Y,g as U,a as Z,v as k,X as F}from"./fxp-CqQGn1qw.js";import"./TextField-DeGHHacn.js";import"./ContentPaste-CJSvfBhK.js";import"./InputFooter-Cia2zmGJ.js";import"./ResultFooter-DAeFmDVK.js";const W={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,s){return t},captureMetaData:!1},q=function(t){return Object.assign({},W,t)};let w;typeof Symbol!="function"?w="@@xmlMetadata":w=Symbol("XML Node Metadata");class b{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,s){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:s})}addChild(e,s){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),s!==void 0&&(this.child[this.child.length-1][w]={startIndex:s})}static getMetaDataSymbol(){return w}}function J(t,e){const s={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let n=1,i=!1,o=!1,l="";for(;e<t.length;e++)if(t[e]==="<"&&!o){if(i&&x(t,"!ENTITY",e)){e+=7;let a,r;[a,r,e]=K(t,e+1),r.indexOf("&")===-1&&(s[a]={regx:RegExp(`&${a};`,"g"),val:r})}else if(i&&x(t,"!ELEMENT",e)){e+=8;const{index:a}=H(t,e+1);e=a}else if(i&&x(t,"!ATTLIST",e))e+=8;else if(i&&x(t,"!NOTATION",e)){e+=9;const{index:a}=z(t,e+1);e=a}else if(x(t,"!--",e))o=!0;else throw new Error("Invalid DOCTYPE");n++,l=""}else if(t[e]===">"){if(o?t[e-1]==="-"&&t[e-2]==="-"&&(o=!1,n--):n--,n===0)break}else t[e]==="["?i=!0:l+=t[e];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:s,i:e}}const m=(t,e)=>{for(;e<t.length&&/\s/.test(t[e]);)e++;return e};function K(t,e){e=m(t,e);let s="";for(;e<t.length&&!/\s/.test(t[e])&&t[e]!=='"'&&t[e]!=="'";)s+=t[e],e++;if($(s),e=m(t,e),t.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(t[e]==="%")throw new Error("Parameter entities are not supported");let n="";return[e,n]=y(t,e,"entity"),e--,[s,n,e]}function z(t,e){e=m(t,e);let s="";for(;e<t.length&&!/\s/.test(t[e]);)s+=t[e],e++;$(s),e=m(t,e);const n=t.substring(e,e+6).toUpperCase();if(n!=="SYSTEM"&&n!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${n}"`);e+=n.length,e=m(t,e);let i=null,o=null;if(n==="PUBLIC")[e,i]=y(t,e,"publicIdentifier"),e=m(t,e),(t[e]==='"'||t[e]==="'")&&([e,o]=y(t,e,"systemIdentifier"));else if(n==="SYSTEM"&&([e,o]=y(t,e,"systemIdentifier"),!o))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:s,publicIdentifier:i,systemIdentifier:o,index:--e}}function y(t,e,s){let n="";const i=t[e];if(i!=='"'&&i!=="'")throw new Error(`Expected quoted string, found "${i}"`);for(e++;e<t.length&&t[e]!==i;)n+=t[e],e++;if(t[e]!==i)throw new Error(`Unterminated ${s} value`);return e++,[e,n]}function H(t,e){e=m(t,e);let s="";for(;e<t.length&&!/\s/.test(t[e]);)s+=t[e],e++;if(!$(s))throw new Error(`Invalid element name: "${s}"`);e=m(t,e);let n="";if(t[e]==="E"&&x(t,"MPTY",e))e+=4;else if(t[e]==="A"&&x(t,"NY",e))e+=2;else if(t[e]==="("){for(e++;e<t.length&&t[e]!==")";)n+=t[e],e++;if(t[e]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${t[e]}"`);return{elementName:s,contentModel:n.trim(),index:e}}function x(t,e,s){for(let n=0;n<e.length;n++)if(e[n]!==t[s+n+1])return!1;return!0}function $(t){if(Y(t))return t;throw new Error(`Invalid entity name ${t}`)}const Q=/^[-+]?0x[a-fA-F0-9]+$/,j=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,D={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function ee(t,e={}){if(e=Object.assign({},D,e),!t||typeof t!="string")return t;let s=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(s))return t;if(t==="0")return 0;if(e.hex&&Q.test(s))return ie(s,16);if(s.search(/.+[eE].+/)!==-1)return se(t,s,e);{const n=j.exec(s);if(n){const i=n[1]||"",o=n[2];let l=ne(n[3]);const a=i?t[o.length+1]===".":t[o.length]===".";if(!e.leadingZeros&&(o.length>1||o.length===1&&!a))return t;{const r=Number(s),f=String(r);if(r===0)return r;if(f.search(/[eE]/)!==-1)return e.eNotation?r:t;if(s.indexOf(".")!==-1)return f==="0"||f===l||f===`${i}${l}`?r:t;let u=o?l:s;return o?u===f||i+u===f?r:t:u===f||u===i+f?r:t}}else return t}}const te=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function se(t,e,s){if(!s.eNotation)return t;const n=e.match(te);if(n){let i=n[1]||"";const o=n[3].indexOf("e")===-1?"E":"e",l=n[2],a=i?t[l.length+1]===o:t[l.length]===o;return l.length>1&&a?t:l.length===1&&(n[3].startsWith(`.${o}`)||n[3][0]===o)?Number(e):s.leadingZeros&&!a?(e=(n[1]||"")+n[3],Number(e)):t}else return t}function ne(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substring(0,t.length-1))),t}function ie(t,e){if(parseInt)return parseInt(t,e);if(Number.parseInt)return Number.parseInt(t,e);if(window&&window.parseInt)return window.parseInt(t,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function _(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(const s of t)if(typeof s=="string"&&e===s||s instanceof RegExp&&s.test(e))return!0}:()=>!1}class re{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(s,n)=>String.fromCodePoint(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(s,n)=>String.fromCodePoint(Number.parseInt(n,16))}},this.addExternalEntities=oe,this.parseXml=de,this.parseTextData=ae,this.resolveNameSpace=le,this.buildAttributesMap=ue,this.isItStopNode=ge,this.replaceEntitiesValue=he,this.readStopNodeData=me,this.saveTextToParentTag=pe,this.addChild=ce,this.ignoreAttributesFn=_(this.options.ignoreAttributes)}}function oe(t){const e=Object.keys(t);for(let s=0;s<e.length;s++){const n=e[s];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:t[n]}}}function ae(t,e,s,n,i,o,l){if(t!==void 0&&(this.options.trimValues&&!n&&(t=t.trim()),t.length>0)){l||(t=this.replaceEntitiesValue(t));const a=this.options.tagValueProcessor(e,t,s,i,o);return a==null?t:typeof a!=typeof t||a!==t?a:this.options.trimValues?C(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?C(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function le(t){if(this.options.removeNSPrefix){const e=t.split(":"),s=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=s+e[1])}return t}const fe=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function ue(t,e,s){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const n=U(t,fe),i=n.length,o={};for(let l=0;l<i;l++){const a=this.resolveNameSpace(n[l][1]);if(this.ignoreAttributesFn(a,e))continue;let r=n[l][4],f=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(f=this.options.transformAttributeName(f)),f==="__proto__"&&(f="#__proto__"),r!==void 0){this.options.trimValues&&(r=r.trim()),r=this.replaceEntitiesValue(r);const u=this.options.attributeValueProcessor(a,r,e);u==null?o[f]=r:typeof u!=typeof r||u!==r?o[f]=u:o[f]=C(r,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[f]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const l={};return l[this.options.attributesGroupName]=o,l}return o}}const de=function(t){t=t.replace(/\r\n?/g,`
`);const e=new b("!xml");let s=e,n="",i="";for(let o=0;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="/"){const a=T(t,">",o,"Closing Tag is not closed.");let r=t.substring(o+2,a).trim();if(this.options.removeNSPrefix){const d=r.indexOf(":");d!==-1&&(r=r.substr(d+1))}this.options.transformTagName&&(r=this.options.transformTagName(r)),s&&(n=this.saveTextToParentTag(n,s,i));const f=i.substring(i.lastIndexOf(".")+1);if(r&&this.options.unpairedTags.indexOf(r)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${r}>`);let u=0;f&&this.options.unpairedTags.indexOf(f)!==-1?(u=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):u=i.lastIndexOf("."),i=i.substring(0,u),s=this.tagsNodeStack.pop(),n="",o=a}else if(t[o+1]==="?"){let a=O(t,o,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,s,i),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const r=new b(a.tagName);r.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(r[":@"]=this.buildAttributesMap(a.tagExp,i,a.tagName)),this.addChild(s,r,i,o)}o=a.closeIndex+1}else if(t.substr(o+1,3)==="!--"){const a=T(t,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){const r=t.substring(o+4,a-2);n=this.saveTextToParentTag(n,s,i),s.add(this.options.commentPropName,[{[this.options.textNodeName]:r}])}o=a}else if(t.substr(o+1,2)==="!D"){const a=J(t,o);this.docTypeEntities=a.entities,o=a.i}else if(t.substr(o+1,2)==="!["){const a=T(t,"]]>",o,"CDATA is not closed.")-2,r=t.substring(o+9,a);n=this.saveTextToParentTag(n,s,i);let f=this.parseTextData(r,s.tagname,i,!0,!1,!0,!0);f==null&&(f=""),this.options.cdataPropName?s.add(this.options.cdataPropName,[{[this.options.textNodeName]:r}]):s.add(this.options.textNodeName,f),o=a+2}else{let a=O(t,o,this.options.removeNSPrefix),r=a.tagName;const f=a.rawTagName;let u=a.tagExp,d=a.attrExpPresent,c=a.closeIndex;this.options.transformTagName&&(r=this.options.transformTagName(r)),s&&n&&s.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,s,i,!1));const p=s;p&&this.options.unpairedTags.indexOf(p.tagname)!==-1&&(s=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),r!==e.tagname&&(i+=i?"."+r:r);const g=o;if(this.isItStopNode(this.options.stopNodes,i,r)){let h="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)r[r.length-1]==="/"?(r=r.substr(0,r.length-1),i=i.substr(0,i.length-1),u=r):u=u.substr(0,u.length-1),o=a.closeIndex;else if(this.options.unpairedTags.indexOf(r)!==-1)o=a.closeIndex;else{const P=this.readStopNodeData(t,f,c+1);if(!P)throw new Error(`Unexpected end of ${f}`);o=P.i,h=P.tagContent}const N=new b(r);r!==u&&d&&(N[":@"]=this.buildAttributesMap(u,i,r)),h&&(h=this.parseTextData(h,r,i,!0,d,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),N.add(this.options.textNodeName,h),this.addChild(s,N,i,g)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){r[r.length-1]==="/"?(r=r.substr(0,r.length-1),i=i.substr(0,i.length-1),u=r):u=u.substr(0,u.length-1),this.options.transformTagName&&(r=this.options.transformTagName(r));const h=new b(r);r!==u&&d&&(h[":@"]=this.buildAttributesMap(u,i,r)),this.addChild(s,h,i,g),i=i.substr(0,i.lastIndexOf("."))}else{const h=new b(r);this.tagsNodeStack.push(s),r!==u&&d&&(h[":@"]=this.buildAttributesMap(u,i,r)),this.addChild(s,h,i,g),s=h}n="",o=c}}else n+=t[o];return e.child};function ce(t,e,s,n){this.options.captureMetaData||(n=void 0);const i=this.options.updateTag(e.tagname,s,e[":@"]);i===!1||(typeof i=="string"&&(e.tagname=i),t.addChild(e,n))}const he=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const s=this.docTypeEntities[e];t=t.replace(s.regx,s.val)}for(let e in this.lastEntities){const s=this.lastEntities[e];t=t.replace(s.regex,s.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const s=this.htmlEntities[e];t=t.replace(s.regex,s.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function pe(t,e,s,n){return t&&(n===void 0&&(n=e.child.length===0),t=this.parseTextData(t,e.tagname,s,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,n),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function ge(t,e,s){const n="*."+s;for(const i in t){const o=t[i];if(n===o||e===o)return!0}return!1}function Ne(t,e,s=">"){let n,i="";for(let o=e;o<t.length;o++){let l=t[o];if(n)l===n&&(n="");else if(l==='"'||l==="'")n=l;else if(l===s[0])if(s[1]){if(t[o+1]===s[1])return{data:i,index:o}}else return{data:i,index:o};else l==="	"&&(l=" ");i+=l}}function T(t,e,s,n){const i=t.indexOf(e,s);if(i===-1)throw new Error(n);return i+e.length-1}function O(t,e,s,n=">"){const i=Ne(t,e+1,n);if(!i)return;let o=i.data;const l=i.index,a=o.search(/\s/);let r=o,f=!0;a!==-1&&(r=o.substring(0,a),o=o.substring(a+1).trimStart());const u=r;if(s){const d=r.indexOf(":");d!==-1&&(r=r.substr(d+1),f=r!==i.data.substr(d+1))}return{tagName:r,tagExp:o,closeIndex:l,attrExpPresent:f,rawTagName:u}}function me(t,e,s){const n=s;let i=1;for(;s<t.length;s++)if(t[s]==="<")if(t[s+1]==="/"){const o=T(t,">",s,`${e} is not closed`);if(t.substring(s+2,o).trim()===e&&(i--,i===0))return{tagContent:t.substring(n,s),i:o};s=o}else if(t[s+1]==="?")s=T(t,"?>",s+1,"StopNode is not closed.");else if(t.substr(s+1,3)==="!--")s=T(t,"-->",s+3,"StopNode is not closed.");else if(t.substr(s+1,2)==="![")s=T(t,"]]>",s,"StopNode is not closed.")-2;else{const o=O(t,s,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&i++,s=o.closeIndex)}}function C(t,e,s){if(e&&typeof t=="string"){const n=t.trim();return n==="true"?!0:n==="false"?!1:ee(t,s)}else return Z(t)?t:""}const A=b.getMetaDataSymbol();function Ee(t,e){return L(t,e)}function L(t,e,s){let n;const i={};for(let o=0;o<t.length;o++){const l=t[o],a=be(l);let r="";if(s===void 0?r=a:r=s+"."+a,a===e.textNodeName)n===void 0?n=l[a]:n+=""+l[a];else{if(a===void 0)continue;if(l[a]){let f=L(l[a],e,r);const u=Te(f,e);l[A]!==void 0&&(f[A]=l[A]),l[":@"]?xe(f,l[":@"],r,e):Object.keys(f).length===1&&f[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?f=f[e.textNodeName]:Object.keys(f).length===0&&(e.alwaysCreateTextNode?f[e.textNodeName]="":f=""),i[a]!==void 0&&i.hasOwnProperty(a)?(Array.isArray(i[a])||(i[a]=[i[a]]),i[a].push(f)):e.isArray(a,r,u)?i[a]=[f]:i[a]=f}}}return typeof n=="string"?n.length>0&&(i[e.textNodeName]=n):n!==void 0&&(i[e.textNodeName]=n),i}function be(t){const e=Object.keys(t);for(let s=0;s<e.length;s++){const n=e[s];if(n!==":@")return n}}function xe(t,e,s,n){if(e){const i=Object.keys(e),o=i.length;for(let l=0;l<o;l++){const a=i[l];n.isArray(a,s+"."+a,!0,!0)?t[a]=[e[a]]:t[a]=e[a]}}}function Te(t,e){const{textNodeName:s}=e,n=Object.keys(t).length;return!!(n===0||n===1&&(t[s]||typeof t[s]=="boolean"||t[s]===0))}class ye{constructor(e){this.externalEntities={},this.options=q(e)}parse(e,s){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(s){s===!0&&(s={});const o=k(e,s);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}const n=new re(this.options);n.addExternalEntities(this.externalEntities);const i=n.parseXml(e);return this.options.preserveOrder||i===void 0?i:Ee(i,this.options)}addEntity(e,s){if(s.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(s==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=s}static getMetaDataSymbol(){return b.getMetaDataSymbol()}}const we=`
`;function Pe(t,e){let s="";return e.format&&e.indentBy.length>0&&(s=we),M(t,e,"",s)}function M(t,e,s,n){let i="",o=!1;for(let l=0;l<t.length;l++){const a=t[l],r=Ie(a);if(r===void 0)continue;let f="";if(s.length===0?f=r:f=`${s}.${r}`,r===e.textNodeName){let g=a[r];Ae(f,e)||(g=e.tagValueProcessor(r,g),g=B(g,e)),o&&(i+=n),i+=g,o=!1;continue}else if(r===e.cdataPropName){o&&(i+=n),i+=`<![CDATA[${a[r][0][e.textNodeName]}]]>`,o=!1;continue}else if(r===e.commentPropName){i+=n+`<!--${a[r][0][e.textNodeName]}-->`,o=!0;continue}else if(r[0]==="?"){const g=S(a[":@"],e),h=r==="?xml"?"":n;let N=a[r][0][e.textNodeName];N=N.length!==0?" "+N:"",i+=h+`<${r}${N}${g}?>`,o=!0;continue}let u=n;u!==""&&(u+=e.indentBy);const d=S(a[":@"],e),c=n+`<${r}${d}`,p=M(a[r],e,f,u);e.unpairedTags.indexOf(r)!==-1?e.suppressUnpairedNode?i+=c+">":i+=c+"/>":(!p||p.length===0)&&e.suppressEmptyNode?i+=c+"/>":p&&p.endsWith(">")?i+=c+`>${p}${n}</${r}>`:(i+=c+">",p&&n!==""&&(p.includes("/>")||p.includes("</"))?i+=n+e.indentBy+p+n:i+=p,i+=`</${r}>`),o=!0}return i}function Ie(t){const e=Object.keys(t);for(let s=0;s<e.length;s++){const n=e[s];if(t.hasOwnProperty(n)&&n!==":@")return n}}function S(t,e){let s="";if(t&&!e.ignoreAttributes)for(let n in t){if(!t.hasOwnProperty(n))continue;let i=e.attributeValueProcessor(n,t[n]);i=B(i,e),i===!0&&e.suppressBooleanAttributes?s+=` ${n.substr(e.attributeNamePrefix.length)}`:s+=` ${n.substr(e.attributeNamePrefix.length)}="${i}"`}return s}function Ae(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let s=t.substr(t.lastIndexOf(".")+1);for(let n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+s)return!0;return!1}function B(t,e){if(t&&t.length>0&&e.processEntities)for(let s=0;s<e.entities.length;s++){const n=e.entities[s];t=t.replace(n.regex,n.val)}return t}const Oe={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function E(t){this.options=Object.assign({},Oe,t),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=_(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Ve),this.processTextOrObjNode=Ce,this.options.format?(this.indentate=$e,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}E.prototype.build=function(t){return this.options.preserveOrder?Pe(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0,[]).val)};E.prototype.j2x=function(t,e,s){let n="",i="";const o=s.join(".");for(let l in t)if(Object.prototype.hasOwnProperty.call(t,l))if(typeof t[l]>"u")this.isAttribute(l)&&(i+="");else if(t[l]===null)this.isAttribute(l)||l===this.options.cdataPropName?i+="":l[0]==="?"?i+=this.indentate(e)+"<"+l+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+l+"/"+this.tagEndChar;else if(t[l]instanceof Date)i+=this.buildTextValNode(t[l],l,"",e);else if(typeof t[l]!="object"){const a=this.isAttribute(l);if(a&&!this.ignoreAttributesFn(a,o))n+=this.buildAttrPairStr(a,""+t[l]);else if(!a)if(l===this.options.textNodeName){let r=this.options.tagValueProcessor(l,""+t[l]);i+=this.replaceEntitiesValue(r)}else i+=this.buildTextValNode(t[l],l,"",e)}else if(Array.isArray(t[l])){const a=t[l].length;let r="",f="";for(let u=0;u<a;u++){const d=t[l][u];if(!(typeof d>"u"))if(d===null)l[0]==="?"?i+=this.indentate(e)+"<"+l+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+l+"/"+this.tagEndChar;else if(typeof d=="object")if(this.options.oneListGroup){const c=this.j2x(d,e+1,s.concat(l));r+=c.val,this.options.attributesGroupName&&d.hasOwnProperty(this.options.attributesGroupName)&&(f+=c.attrStr)}else r+=this.processTextOrObjNode(d,l,e,s);else if(this.options.oneListGroup){let c=this.options.tagValueProcessor(l,d);c=this.replaceEntitiesValue(c),r+=c}else r+=this.buildTextValNode(d,l,"",e)}this.options.oneListGroup&&(r=this.buildObjectNode(r,l,f,e)),i+=r}else if(this.options.attributesGroupName&&l===this.options.attributesGroupName){const a=Object.keys(t[l]),r=a.length;for(let f=0;f<r;f++)n+=this.buildAttrPairStr(a[f],""+t[l][a[f]])}else i+=this.processTextOrObjNode(t[l],l,e,s);return{attrStr:n,val:i}};E.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function Ce(t,e,s,n){const i=this.j2x(t,s+1,n.concat(e));return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,i.attrStr,s):this.buildObjectNode(i.val,e,i.attrStr,s)}E.prototype.buildObjectNode=function(t,e,s,n){if(t==="")return e[0]==="?"?this.indentate(n)+"<"+e+s+"?"+this.tagEndChar:this.indentate(n)+"<"+e+s+this.closeTag(e)+this.tagEndChar;{let i="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",i=""),(s||s==="")&&t.indexOf("<")===-1?this.indentate(n)+"<"+e+s+o+">"+t+i:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(n)+`<!--${t}-->`+this.newLine:this.indentate(n)+"<"+e+s+o+this.tagEndChar+t+this.indentate(n)+i}};E.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};E.prototype.buildTextValNode=function(t,e,s,n){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(n)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(n)+"<"+e+s+"?"+this.tagEndChar;{let i=this.options.tagValueProcessor(e,t);return i=this.replaceEntitiesValue(i),i===""?this.indentate(n)+"<"+e+s+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+s+">"+i+"</"+e+this.tagEndChar}};E.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const s=this.options.entities[e];t=t.replace(s.regex,s.val)}return t};function $e(t){return this.options.indentBy.repeat(t)}function Ve(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}function Se(t,e){const s=F.validate(t);if(s!==!0)return typeof s=="object"&&s.err?`Invalid XML: ${s.err.msg} (line ${s.err.line}, col ${s.err.col})`:"Invalid XML";try{const i=new ye().parse(t);return new E({format:!0,indentBy:"  "}).build(i)}catch(n){return`Invalid XML: ${n.message}`}}const _e={},Le=[{title:"Beautify XML",description:"Beautify a compact XML string for readability.",sampleText:"<root><item>1</item><item>2</item></root>",sampleResult:`<root>
  <item>1</item>
  <item>2</item>
</root>`,sampleOptions:{}}];function ke({title:t,longDescription:e}){const{t:s}=R("xml"),[n,i]=V.useState(""),[o,l]=V.useState(""),a=(r,f)=>{l(Se(f))};return I.jsx(X,{title:t,input:n,inputComponent:I.jsx(v,{title:s("xmlBeautifier.inputTitle"),value:n,onChange:i}),resultComponent:I.jsx(G,{title:s("xmlBeautifier.resultTitle"),value:o,extension:"xml"}),initialValues:_e,exampleCards:Le,getGroups:null,setInput:i,compute:a,toolInfo:{title:s("xmlBeautifier.toolInfo.title",{title:t}),description:e}})}export{ke as default};
