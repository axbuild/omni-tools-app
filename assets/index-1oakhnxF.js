import{a as v,r as s,j as i,B as j,aB as u}from"./index-7JCrVMyd.js";import{c as F,d,e as y}from"./index.esm-Cob4-rpC.js";import{T as B}from"./ToolFileResult-Div6pbTm.js";import{T as $}from"./ToolContent-DrkA_-Xz.js";import{T as f}from"./TextFieldWithDesc-D98LnRRi.js";import{f as R,F as k}from"./index-on_GoYzL.js";import{l as I}from"./lodash-jIFHsyXN.js";import{T as N}from"./ToolVideoInput-D0Q1Ed0Y.js";import"./ContentPaste-CJSvfBhK.js";import"./grey-pattern-DMflWW5d.js";import"./ResultFooter-DAeFmDVK.js";import"./TextField-DeGHHacn.js";import"./objectWithoutProperties-rK072Nhf.js";import"./BaseFileInput-CTIURbfW.js";import"./InputFooter-Cia2zmGJ.js";const a=new k,D={trimStart:0,trimEnd:100},O=F({trimStart:d().min(0,"Start time must be positive"),trimEnd:d().min(y("trimStart"),"End time must be greater than start time")});function X({title:x}){const{t:m}=v("video"),[p,l]=s.useState(null),[T,g]=s.useState(null),w=async(r,t)=>{if(!t)return;const{trimStart:e,trimEnd:n}=r;try{a.loaded||await a.load({wasmURL:"https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.9/dist/esm/ffmpeg-core.wasm"});const o="input.mp4",c="output.mp4";await a.writeFile(o,await R(t)),await a.exec(["-i",o,"-ss",e.toString(),"-to",n.toString(),"-c","copy",c]);const S=await a.readFile(c),C=new Blob([S],{type:"video/mp4"}),E=new File([C],`${t.name.replace(/\.[^/.]+$/,"")}_trimmed.mp4`,{type:"video/mp4"});g(E)}catch(o){console.error("Error trimming video:",o)}},b=s.useCallback(I.debounce(w,1e3),[]),h=({values:r,updateField:t})=>[{title:m("trim.timestamps"),component:i.jsxs(j,{children:[i.jsx(f,{onOwnChange:e=>u(e,"trimStart",t),value:r.trimStart,label:m("trim.startTime"),sx:{mb:2,backgroundColor:"background.paper"}}),i.jsx(f,{onOwnChange:e=>u(e,"trimEnd",t),value:r.trimEnd,label:m("trim.endTime")})]})}];return i.jsx($,{title:x,input:p,renderCustomInput:({trimStart:r,trimEnd:t},e)=>i.jsx(N,{value:p,onChange:l,title:m("trim.inputTitle"),showTrimControls:!0,onTrimChange:(n,o)=>{e("trimStart",n),e("trimEnd",o)},trimStart:r,trimEnd:t}),resultComponent:i.jsx(B,{title:m("trim.resultTitle"),value:T,extension:"mp4"}),initialValues:D,getGroups:h,compute:b,setInput:l,validationSchema:O})}export{X as default};
