import{a as v,d as C,r as g,J as P,j as t,B as f,ao as w,T as y,h as R}from"./index-7JCrVMyd.js";import{T as I}from"./ToolContent-DrkA_-Xz.js";import{T}from"./ToolPdfInput-CYdTNe9U.js";import{G as k,p as D,g as F,J as B}from"./jszip.min-CEM5lcMP.js";import{I as L}from"./ContentPaste-CJSvfBhK.js";import{g as U}from"./grey-pattern-DMflWW5d.js";import{C as S,R as W}from"./ResultFooter-DAeFmDVK.js";import"./TextField-DeGHHacn.js";import"./BaseFileInput-CTIURbfW.js";import"./InputFooter-Cia2zmGJ.js";import"./lodash-jIFHsyXN.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";k.workerSrc=D;async function z(d){const l=await d.arrayBuffer(),r=await F({data:l}).promise,p=new B,c=[];for(let s=1;s<=r.numPages;s++){const i=await r.getPage(s),e=i.getViewport({scale:2}),a=document.createElement("canvas"),o=a.getContext("2d");a.width=e.width,a.height=e.height,await i.render({canvasContext:o,viewport:e}).promise;const n=await new Promise(j=>a.toBlob(x=>x&&j(x),"image/png")),h=`page-${s}.png`,b=URL.createObjectURL(n);c.push({blob:n,url:b,filename:h}),p.file(h,n)}const u=await p.generateAsync({type:"arraybuffer"}),m=new File([u],d.name.replace(/\.pdf$/i,"-pages.zip"),{type:"application/zip"});return{images:c,zipFile:m}}function G({title:d="Result",value:l,zipFile:r,loading:p,loadingText:c}){const{t:u}=v(),m=C();g.useContext(P);const s=e=>e.type.startsWith("image/")?"image":e.type.startsWith("video/")?"video":e.type.startsWith("audio/")?"audio":e.type.startsWith("application/pdf")?"pdf":"unknown",i=e=>{const a=URL.createObjectURL(e),o=document.createElement("a");o.href=a,o.download=e.name,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)};return t.jsxs(f,{children:[t.jsx(L,{title:d||u("toolMultiFileResult.result")}),t.jsx(f,{sx:{width:"100%",height:w,overflowY:"auto",display:"flex",flexDirection:"column",gap:2,border:1,borderRadius:2,boxShadow:"5",bgcolor:"background.paper",alignItems:"center",p:2},children:p?t.jsxs(f,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:w},children:[t.jsx(S,{}),t.jsx(y,{variant:"body2",sx:{mt:2},children:c||u("toolMultiFileResult.loading")})]}):l.length>0&&l.map((e,a)=>{const o=URL.createObjectURL(e),n=s(e);return t.jsxs(f,{sx:{backgroundImage:n==="image"&&m.palette.mode!=="dark"?`url(${U})`:"none",p:1,border:"1px solid #ddd",borderRadius:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[n==="image"&&t.jsx("img",{src:o,alt:`Preview ${a}`,style:{maxWidth:"100%",maxHeight:300}}),n==="video"&&t.jsx("video",{src:o,controls:!0,style:{maxWidth:"100%"}}),n==="audio"&&t.jsx("audio",{src:o,controls:!0,style:{width:"100%"}}),n==="pdf"&&t.jsx("iframe",{src:o,width:"100%",height:"400px"}),n==="unknown"&&t.jsx(y,{children:"File ready. Click below to download."}),t.jsxs(R,{onClick:()=>i(e),size:"small",sx:{mt:1},variant:"contained",children:["Download ",e.name]})]},a)})}),t.jsx(W,{downloadLabel:"Download All as ZIP",hideCopy:!0,disabled:!r,handleDownload:()=>r&&i(r)})]})}function _({title:d}){const[l,r]=g.useState(null),[p,c]=g.useState([]),[u,m]=g.useState(null),[s,i]=g.useState(!1),e=async(a,o)=>{if(o){i(!0),c([]),m(null);try{const{images:n,zipFile:h}=await z(o);c(n),m(h)}catch(n){console.error("Conversion failed:",n)}finally{i(!1)}}};return t.jsx(I,{title:d,input:l,setInput:r,initialValues:{},compute:e,inputComponent:t.jsx(T,{value:l,onChange:r,accept:["application/pdf"],title:"Upload a PDF"}),resultComponent:t.jsx(G,{title:"Converted PNG Pages",value:p.map(a=>new File([a.blob],a.filename,{type:"image/png"})),zipFile:u,loading:s,loadingText:"Converting PDF pages"}),getGroups:null,toolInfo:{title:"Convert PDF pages into PNG images",description:"Upload your PDF and get each page rendered as a high-quality PNG. You can preview, download individually, or get all images in a ZIP."}})}export{_ as default};
