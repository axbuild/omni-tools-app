import{r as u,j as t,B as F}from"./index-7JCrVMyd.js";import{T as h}from"./ToolFileResult-Div6pbTm.js";import{T as I}from"./TextFieldWithDesc-D98LnRRi.js";import{T}from"./ToolContent-DrkA_-Xz.js";import{T as j}from"./ToolImageInput-BfRmeQE8.js";import{f as b,F as S}from"./index-on_GoYzL.js";import"./ContentPaste-CJSvfBhK.js";import"./grey-pattern-DMflWW5d.js";import"./ResultFooter-DAeFmDVK.js";import"./TextField-DeGHHacn.js";import"./BaseFileInput-CTIURbfW.js";import"./InputFooter-Cia2zmGJ.js";import"./lodash-jIFHsyXN.js";const C={newSpeed:2};function W({title:f}){const[p,n]=u.useState(null),[c,g]=u.useState(null),w=(s,i)=>{if(!i)return;const{newSpeed:a}=s;let e=null,r=!1;(async(l,m)=>{e||(e=new S),r||(await e.load({wasmURL:"https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.9/dist/esm/ffmpeg-core.wasm"}),r=!0);try{await e.writeFile("input.gif",await b(l)),await e.exec(["-i","input.gif","-filter_complex",`[0:v]setpts=${1/m}*PTS,split[a][b];[a]palettegen[p];[b][p]paletteuse`,"-f","gif","output.gif"]);const o=await e.readFile("output.gif"),d=new Blob([o],{type:"image/gif"}),x=new File([d],l.name.replace(".gif",`-${m}x.gif`),{type:"image/gif"});await e.deleteFile("input.gif"),await e.deleteFile("output.gif"),g(x)}catch(o){throw console.error("Error processing GIF:",o),o}})(i,a)};return t.jsx(T,{title:f,input:p,inputComponent:t.jsx(j,{value:p,onChange:n,accept:["image/gif"],title:"Input GIF"}),resultComponent:t.jsx(h,{title:"Output GIF with new speed",value:c,extension:"gif"}),initialValues:C,getGroups:({values:s,updateField:i})=>[{title:"New GIF speed",component:t.jsx(F,{children:t.jsx(I,{value:s.newSpeed,onOwnChange:a=>i("newSpeed",Number(a)),description:"Default multiplier: 2 means 2x faster",type:"number"})})}],compute:w,setInput:n})}export{W as default};
