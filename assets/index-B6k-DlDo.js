import{r as h,j as e,B as R}from"./index-7JCrVMyd.js";import{c as v}from"./index.esm-Cob4-rpC.js";import{T as F}from"./ToolImageInput-BfRmeQE8.js";import{T as S}from"./ToolFileResult-Div6pbTm.js";import{C as b}from"./ColorSelector-C-ZQjJzA.js";import{C as D}from"./index-CFrAXb6N.js";import{T as B}from"./TextFieldWithDesc-D98LnRRi.js";import{a as E}from"./color-zwma1Zlz.js";import{T as G}from"./ToolContent-DrkA_-Xz.js";import"./BaseFileInput-CTIURbfW.js";import"./ContentPaste-CJSvfBhK.js";import"./InputFooter-Cia2zmGJ.js";import"./grey-pattern-DMflWW5d.js";import"./lodash-jIFHsyXN.js";import"./ResultFooter-DAeFmDVK.js";import"./TextField-DeGHHacn.js";const N={fromColor:"white",similarity:"10"},P=v({});function Z({title:f}){const[p,d]=h.useState(null),[C,x]=h.useState(null),w=(s,r)=>{if(!r)return;const{fromColor:a,similarity:T}=s;let u;try{u=D(a).rgb().array()}catch{return}(async(m,I,j)=>{const o=document.createElement("canvas"),l=o.getContext("2d");if(l==null)return;const i=new Image;i.src=URL.createObjectURL(m),await i.decode(),o.width=i.width,o.height=i.height,l.drawImage(i,0,0);const g=l.getImageData(0,0,o.width,o.height),n=g.data;for(let t=0;t<n.length;t+=4){const c=[n[t],n[t+1],n[t+2]];E(c,I,j)&&(n[t+3]=0)}l.putImageData(g,0,0),o.toBlob(t=>{if(t){const c=new File([t],m.name,{type:"image/png"});x(c)}},"image/png")})(r,u,Number(T))},y=({values:s,updateField:r})=>[{title:"From color and similarity",component:e.jsxs(R,{children:[e.jsx(b,{value:s.fromColor,onColorChange:a=>r("fromColor",a),description:"Replace this color (from color)",inputProps:{"data-testid":"color-input"}}),e.jsx(B,{value:s.similarity,onOwnChange:a=>r("similarity",a),description:"Match this % of similar colors of the from color. For example, 10% white will match white and a little bit of gray."})]})}];return e.jsx(G,{title:f,inputComponent:e.jsx(F,{value:p,onChange:d,accept:["image/*"],title:"Input image"}),resultComponent:e.jsx(S,{title:"Transparent PNG",value:C,extension:"png"}),initialValues:N,getGroups:y,compute:w,input:p,validationSchema:P,toolInfo:{title:"Create Transparent PNG",description:"This tool allows you to make specific colors in an image transparent. You can select the color to replace and adjust the similarity threshold to include similar colors."}})}export{Z as default};
